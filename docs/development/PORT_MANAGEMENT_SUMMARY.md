# ç«¯å£ç®¡ç†åŠŸèƒ½æ€»ç»“

## âœ… å·²å®Œæˆçš„åŠŸèƒ½

### 1. æ™ºèƒ½ç«¯å£ç®¡ç†ç³»ç»Ÿ

å·²æˆåŠŸå®ç°å®Œæ•´çš„ç«¯å£ç®¡ç†é€»è¾‘ï¼ŒåŒ…æ‹¬ï¼š

#### ğŸ“‹ é…ç½®è¯»å–
- âœ… ä» `.env.local` è¯»å– `PORT` é…ç½®ï¼ˆé»˜è®¤ï¼š5000ï¼‰
- âœ… æ”¯æŒé€šè¿‡ç¯å¢ƒå˜é‡è¦†ç›–é…ç½®

#### ğŸ” ç«¯å£æ£€æµ‹
- âœ… å¯åŠ¨å‰è‡ªåŠ¨æ£€æµ‹ç«¯å£æ˜¯å¦è¢«å ç”¨
- âœ… ä½¿ç”¨ Node.js `net` æ¨¡å—è¿›è¡Œå¯é æ£€æµ‹
- âœ… æ˜¾ç¤ºç«¯å£çŠ¶æ€ä¿¡æ¯

#### ğŸ› ï¸ è¿›ç¨‹ç®¡ç†
- âœ… è‡ªåŠ¨è·å–å ç”¨ç«¯å£çš„è¿›ç¨‹ PIDï¼ˆWindowsï¼‰
- âœ… å°è¯•ä½¿ç”¨ `taskkill` å…³é—­å ç”¨è¿›ç¨‹
- âœ… æ˜¾ç¤ºè¯¦ç»†çš„æ“ä½œæ—¥å¿—
- âœ… å¤„ç†æƒé™ä¸è¶³ç­‰å¼‚å¸¸æƒ…å†µ

#### ğŸ”„ ç«¯å£åˆ‡æ¢
- âœ… å¦‚æœæ— æ³•å…³é—­å ç”¨è¿›ç¨‹ï¼Œè‡ªåŠ¨å¯»æ‰¾å¯ç”¨ç«¯å£
- âœ… ä»åŸç«¯å£+1å¼€å§‹ï¼Œæœ€å¤šå°è¯•100ä¸ªç«¯å£
- âœ… æ˜¾ç¤ºæœ€ç»ˆä½¿ç”¨çš„ç«¯å£å·

#### ğŸ“Š æ—¥å¿—è¾“å‡º
- âœ… å½©è‰²å›¾æ ‡å’Œæ¸…æ™°çš„æ—¥å¿—æ ¼å¼
- âœ… æ˜¾ç¤ºæ‰€æœ‰å…³é”®æ­¥éª¤çš„çŠ¶æ€
- âœ… æä¾›æœ¬åœ°å’Œç½‘ç»œè®¿é—®åœ°å€

### 2. å¯åŠ¨æ–¹å¼

å·²æä¾›å¤šç§å¯åŠ¨æ–¹å¼ï¼š

#### Windows æ‰¹å¤„ç†è„šæœ¬
- âœ… `start.bat` - åŒå‡»å¯åŠ¨
- âœ… è‡ªåŠ¨æ£€æµ‹å¹¶å®‰è£…ä¾èµ–
- âœ… æ”¯æŒä¸­æ–‡å­—ç¬¦æ˜¾ç¤º

#### NPM è„šæœ¬
- âœ… `npm start` - æ ‡å‡†å¯åŠ¨å‘½ä»¤
- âœ… `npm run dev` - å¼€å‘æ¨¡å¼å¯åŠ¨

#### ç›´æ¥è¿è¡Œ
- âœ… `node server.js` - Node.js ç›´æ¥è¿è¡Œ

### 3. æ–‡æ¡£è¯´æ˜

å·²åˆ›å»ºå®Œæ•´çš„æ–‡æ¡£ä½“ç³»ï¼š

- âœ… `LOCAL_SERVER_README.md` - å¿«é€Ÿå…¥é—¨æŒ‡å—
- âœ… `docs/development/LOCAL_SERVER_GUIDE.md` - è¯¦ç»†ä½¿ç”¨æ–‡æ¡£
- âœ… `docs/development/PORT_MANAGEMENT_SUMMARY.md` - åŠŸèƒ½æ€»ç»“ï¼ˆæœ¬æ–‡æ¡£ï¼‰

## ğŸ“ æ–‡ä»¶æ¸…å•

### æ ¸å¿ƒæ–‡ä»¶

| æ–‡ä»¶ | è¯´æ˜ | çŠ¶æ€ |
|------|------|------|
| `server.js` | æœåŠ¡å™¨ä¸»ç¨‹åºï¼ŒåŒ…å«æ™ºèƒ½ç«¯å£ç®¡ç†é€»è¾‘ | âœ… å·²åˆ›å»º |
| `package.json` | Node.js é¡¹ç›®é…ç½®ï¼Œå®šä¹‰ä¾èµ–å’Œè„šæœ¬ | âœ… å·²åˆ›å»º |
| `start.bat` | Windows å¿«é€Ÿå¯åŠ¨è„šæœ¬ | âœ… å·²åˆ›å»º |
| `.env.local` | ç¯å¢ƒé…ç½®ï¼ˆåŒ…å« PORT=5000ï¼‰ | âœ… å·²å­˜åœ¨ |
| `.gitignore` | Git å¿½ç•¥é…ç½®ï¼ˆå·²åŒ…å« node_modulesï¼‰ | âœ… å·²å­˜åœ¨ |

### ä¾èµ–åŒ…

| åŒ…å | ç‰ˆæœ¬ | ç”¨é€” | çŠ¶æ€ |
|------|------|------|------|
| express | ^4.18.2 | Web æœåŠ¡å™¨æ¡†æ¶ | âœ… å·²å®‰è£… |
| dotenv | ^16.3.1 | ç¯å¢ƒå˜é‡åŠ è½½ | âœ… å·²å®‰è£… |

### æ–‡æ¡£æ–‡ä»¶

| æ–‡ä»¶ | è¯´æ˜ | çŠ¶æ€ |
|------|------|------|
| `LOCAL_SERVER_README.md` | å¿«é€Ÿå¼€å§‹æŒ‡å— | âœ… å·²åˆ›å»º |
| `docs/development/LOCAL_SERVER_GUIDE.md` | è¯¦ç»†ä½¿ç”¨æ–‡æ¡£ | âœ… å·²åˆ›å»º |
| `docs/development/PORT_MANAGEMENT_SUMMARY.md` | åŠŸèƒ½æ€»ç»“ | âœ… å·²åˆ›å»º |

## ğŸ¯ ä½¿ç”¨æµç¨‹

### å…¸å‹å·¥ä½œæµç¨‹

```
1. ç”¨æˆ·åŒå‡» start.bat æˆ–è¿è¡Œ npm start
   â†“
2. è¯»å– .env.local ä¸­çš„ PORT é…ç½®ï¼ˆ5000ï¼‰
   â†“
3. æ£€æµ‹ç«¯å£ 5000 æ˜¯å¦å¯ç”¨
   â†“
4. å¦‚æœå¯ç”¨ â†’ ç›´æ¥åœ¨ 5000 ç«¯å£å¯åŠ¨
   â†“
5. å¦‚æœè¢«å ç”¨
   â†“
   5.1 è·å–å ç”¨è¿›ç¨‹çš„ PID
   â†“
   5.2 å°è¯•å…³é—­è¯¥è¿›ç¨‹
   â†“
   5.3 ç­‰å¾… 1 ç§’æ£€æŸ¥ç«¯å£æ˜¯å¦é‡Šæ”¾
   â†“
   5.4 å¦‚æœé‡Šæ”¾æˆåŠŸ â†’ åœ¨ 5000 ç«¯å£å¯åŠ¨
   â†“
   5.5 å¦‚æœä»è¢«å ç”¨ â†’ å¯»æ‰¾ 5001, 5002... ç›´åˆ°æ‰¾åˆ°å¯ç”¨ç«¯å£
   â†“
6. æ˜¾ç¤ºè®¿é—®åœ°å€ï¼šhttp://localhost:[ç«¯å£]
   â†“
7. ç”¨æˆ·åœ¨æµè§ˆå™¨ä¸­è®¿é—®
```

## ğŸ”§ æŠ€æœ¯å®ç°

### ç«¯å£æ£€æµ‹æœºåˆ¶

```javascript
// ä½¿ç”¨ net.createServer() å°è¯•ç›‘å¬ç«¯å£
function isPortInUse(port) {
  return new Promise((resolve) => {
    const server = net.createServer();
    
    server.once('error', (err) => {
      if (err.code === 'EADDRINUSE') {
        resolve(true);  // ç«¯å£è¢«å ç”¨
      } else {
        resolve(false);
      }
    });
    
    server.once('listening', () => {
      server.close();
      resolve(false);  // ç«¯å£å¯ç”¨
    });
    
    server.listen(port);
  });
}
```

### è¿›ç¨‹æŸ¥è¯¢ï¼ˆWindowsï¼‰

```javascript
// ä½¿ç”¨ netstat æŸ¥è¯¢å ç”¨ç«¯å£çš„è¿›ç¨‹
exec(`netstat -ano | findstr :${port}`, (error, stdout) => {
  // ä»è¾“å‡ºä¸­æå– PID
  // æŸ¥æ‰¾ LISTENING çŠ¶æ€çš„è¡Œ
  // è¿”å›æœ€åä¸€åˆ—çš„ PID
});
```

### è¿›ç¨‹å…³é—­ï¼ˆWindowsï¼‰

```javascript
// ä½¿ç”¨ taskkill å¼ºåˆ¶å…³é—­è¿›ç¨‹
exec(`taskkill /PID ${pid} /F`, (error, stdout) => {
  // /F å‚æ•°ï¼šå¼ºåˆ¶å…³é—­
  // å…³é—­åç­‰å¾… 1 ç§’è®©ç³»ç»Ÿé‡Šæ”¾ç«¯å£
});
```

### ç«¯å£æŸ¥æ‰¾

```javascript
// ä» startPort å¼€å§‹ï¼Œæœ€å¤šå°è¯• 100 ä¸ªç«¯å£
async function findAvailablePort(startPort) {
  let port = startPort;
  while (port < startPort + 100) {
    if (!(await isPortInUse(port))) {
      return port;
    }
    port++;
  }
  throw new Error('æ— æ³•æ‰¾åˆ°å¯ç”¨ç«¯å£');
}
```

## ğŸ“Š æµ‹è¯•ç»“æœ

### âœ… æµ‹è¯•åœºæ™¯ 1ï¼šç«¯å£å¯ç”¨
- **é¢„æœŸ**ï¼šç›´æ¥åœ¨é…ç½®çš„ç«¯å£å¯åŠ¨
- **ç»“æœ**ï¼šâœ… æˆåŠŸ
- **è¾“å‡º**ï¼š
  ```
  âœ… ç«¯å£ 5000 å¯ç”¨
  ğŸš€ æœåŠ¡å™¨å·²å¯åŠ¨ï¼
  ğŸ“ æœ¬åœ°è®¿é—®: http://localhost:5000
  ```

### âœ… æµ‹è¯•åœºæ™¯ 2ï¼šHTTP æœåŠ¡æ­£å¸¸
- **æµ‹è¯•æ–¹æ³•**ï¼š`curl http://localhost:5000`
- **ç»“æœ**ï¼šâœ… æˆåŠŸ
- **çŠ¶æ€ç **ï¼š200 OK
- **å“åº”**ï¼šæ­£ç¡®è¿”å› index.html å†…å®¹

### â³ å¾…æµ‹è¯•åœºæ™¯

ç”±äºæµ‹è¯•ç¯å¢ƒé™åˆ¶ï¼Œä»¥ä¸‹åœºæ™¯éœ€è¦åœ¨å®é™…ä½¿ç”¨ä¸­éªŒè¯ï¼š

- ç«¯å£è¢«å ç”¨ï¼ŒæˆåŠŸå…³é—­è¿›ç¨‹
- ç«¯å£è¢«å ç”¨ï¼Œæ— æ³•å…³é—­è¿›ç¨‹ï¼Œè‡ªåŠ¨åˆ‡æ¢ç«¯å£
- å¤šæ¬¡ç«¯å£å†²çªï¼Œé€ä¸€å°è¯•ç›´åˆ°æ‰¾åˆ°å¯ç”¨ç«¯å£

## ğŸŒŸ ä¼˜åŠ¿ç‰¹ç‚¹

### 1. é›¶é…ç½®ä½¿ç”¨
- å¼€ç®±å³ç”¨ï¼Œæ— éœ€å¤æ‚é…ç½®
- åŒå‡»å³å¯å¯åŠ¨

### 2. æ™ºèƒ½å¤„ç†
- è‡ªåŠ¨å¤„ç†ç«¯å£å†²çª
- æ— éœ€æ‰‹åŠ¨æŸ¥æ‰¾å’Œå…³é—­è¿›ç¨‹

### 3. ç”¨æˆ·å‹å¥½
- æ¸…æ™°çš„ä¸­æ–‡æ—¥å¿—
- è¯¦ç»†çš„çŠ¶æ€æç¤º
- å›¾æ ‡åŒ–çš„ä¿¡æ¯å±•ç¤º

### 4. å¥å£®æ€§å¼º
- å¤šé‡å®¹é”™æœºåˆ¶
- å¼‚å¸¸æƒ…å†µè‡ªåŠ¨é™çº§å¤„ç†
- ä¸ä¼šå› ç«¯å£é—®é¢˜å¯åŠ¨å¤±è´¥

### 5. çµæ´»é…ç½®
- é€šè¿‡ .env.local é…ç½®é»˜è®¤ç«¯å£
- æ”¯æŒç¯å¢ƒå˜é‡è¦†ç›–
- é€‚åº”ä¸åŒå¼€å‘ç¯å¢ƒ

## ğŸ”® æœªæ¥å¢å¼ºå»ºè®®

### çŸ­æœŸæ”¹è¿›
- [ ] æ·»åŠ  Linux/macOS æ”¯æŒï¼ˆä½¿ç”¨ `lsof` å’Œ `kill` å‘½ä»¤ï¼‰
- [ ] æä¾›å›¾å½¢åŒ–ç•Œé¢æ˜¾ç¤ºæœåŠ¡å™¨çŠ¶æ€
- [ ] æ·»åŠ è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨åŠŸèƒ½
- [ ] æ”¯æŒ HTTPS æœ¬åœ°å¼€å‘

### é•¿æœŸè§„åˆ’
- [ ] é›†æˆçƒ­é‡è½½åŠŸèƒ½
- [ ] æ·»åŠ è¯·æ±‚æ—¥å¿—è®°å½•
- [ ] æ”¯æŒå¤šä¸ªç«¯å£åŒæ—¶ç›‘å¬
- [ ] é›†æˆä»£ç†é…ç½®ï¼ˆç”¨äº API å¼€å‘ï¼‰
- [ ] æ·»åŠ æ€§èƒ½ç›‘æ§é¢æ¿

## ğŸ“ ç»´æŠ¤è¯´æ˜

### å®šæœŸæ£€æŸ¥
- å®šæœŸæ›´æ–°ä¾èµ–åŒ…ç‰ˆæœ¬
- æµ‹è¯•æ–°ç‰ˆæœ¬ Node.js å…¼å®¹æ€§
- æ›´æ–°æ–‡æ¡£ä¸­çš„è¿‡æ—¶ä¿¡æ¯

### é—®é¢˜åé¦ˆ
é‡åˆ°é—®é¢˜æ—¶è¯·æä¾›ï¼š
- æ“ä½œç³»ç»Ÿç‰ˆæœ¬
- Node.js ç‰ˆæœ¬
- å®Œæ•´çš„é”™è¯¯æ—¥å¿—
- å¤ç°æ­¥éª¤

## ğŸ‰ æ€»ç»“

æœ¬æ¬¡æ›´æ–°æˆåŠŸå®ç°äº†å®Œæ•´çš„æœ¬åœ°å¼€å‘æœåŠ¡å™¨ç«¯å£ç®¡ç†ç³»ç»Ÿï¼Œå…·æœ‰ä»¥ä¸‹æ ¸å¿ƒä»·å€¼ï¼š

1. **è‡ªåŠ¨åŒ–**ï¼šæ¶ˆé™¤æ‰‹åŠ¨ç«¯å£ç®¡ç†çš„ç¹ç
2. **æ™ºèƒ½åŒ–**ï¼šè‡ªåŠ¨å¤„ç†å„ç§ç«¯å£å†²çªåœºæ™¯
3. **å‹å¥½åŒ–**ï¼šæ¸…æ™°çš„ä¸­æ–‡æç¤ºå’Œæ—¥å¿—
4. **å¯é åŒ–**ï¼šå¤šé‡å®¹é”™ï¼Œç¡®ä¿æœåŠ¡å™¨èƒ½å¤Ÿå¯åŠ¨

ç³»ç»Ÿå·²é€šè¿‡åŸºæœ¬æµ‹è¯•ï¼Œå¯ä»¥æŠ•å…¥æ—¥å¸¸å¼€å‘ä½¿ç”¨ã€‚

---

**åˆ›å»ºæ—¥æœŸ**ï¼š2025-11-03  
**æµ‹è¯•çŠ¶æ€**ï¼šâœ… åŸºç¡€åŠŸèƒ½å·²éªŒè¯  
**ç”Ÿäº§å°±ç»ª**ï¼šâœ… å¯ä»¥ä½¿ç”¨

