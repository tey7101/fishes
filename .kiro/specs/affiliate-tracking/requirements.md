# 需求文档

## 简介

本功能为管理后台添加联盟推广者（Affiliate）追踪系统。每个推广者获得独立的推广链接，通过该链接注册或付费的用户将被记录来源，便于后续与推广者进行佣金结算。

## 术语表

- **推广者（Affiliate）**: 帮助推广产品的合作伙伴，通过分享专属链接获取佣金
- **推广码（Referral Code）**: 推广者的唯一标识码，用于生成推广链接
- **推荐记录（Referral）**: 通过推广链接产生的注册或付费记录
- **管理员（Admin）**: 系统管理员，可管理所有推广者
- **推广者面板（Affiliate Dashboard）**: 推广者查看自己推广数据的界面

## 需求列表

### 需求 1

**用户故事:** 作为管理员，我希望能创建推广者账户并生成唯一推广码，以便招募新的推广合作伙伴。

#### 验收标准

1. WHEN 管理员创建新推广者 THEN 系统 SHALL 生成唯一推广码并保存推广者记录
2. WHEN 管理员查看推广者列表 THEN 系统 SHALL 显示所有推广者及其推广码和基本统计数据
3. WHEN 管理员禁用某推广者 THEN 系统 SHALL 将该推广者标记为非活跃状态并停止追踪该推广码的新推荐

### 需求 2

**用户故事:** 作为推广者，我希望分享我的专属推广链接，以便追踪通过我的链接注册的用户。

#### 验收标准

1. WHEN 用户通过带推广码参数的链接访问网站（如 ?ref=CODE）THEN 系统 SHALL 将推广码存储到 localStorage
2. WHEN 用户注册且本地存有推广码 THEN 系统 SHALL 在数据库中记录推荐关系
3. WHEN 用户完成付费且本地存有推广码 THEN 系统 SHALL 将该付费记录归属到对应推广者

### 需求 3

**用户故事:** 作为推广者，我希望登录后查看我的推广统计数据，以便了解我的推广效果。

#### 验收标准

1. WHEN 推广者使用有效凭证登录 THEN 系统 SHALL 验证身份并跳转到推广者面板
2. WHEN 推广者查看面板 THEN 系统 SHALL 显示总推荐数、总付费金额和最近转化列表
3. WHEN 推广者查看转化详情 THEN 系统 SHALL 显示每个推荐用户的注册日期、付费金额和付费日期

### 需求 4

**用户故事:** 作为管理员，我希望查看所有推广者的业绩数据，以便计算佣金进行结算。

#### 验收标准

1. WHEN 管理员查看推广者报表 THEN 系统 SHALL 显示每个推广者的总推荐数和产生的总收入
2. WHEN 管理员按日期范围筛选 THEN 系统 SHALL 仅显示指定时间段内的转化数据
3. WHEN 管理员导出数据 THEN 系统 SHALL 生成包含推广者业绩指标的可下载报表


### 需求 5

**用户故事:** 作为管理员，我希望后台管理入口更加清晰有序，以便快速访问不同的管理功能。

#### 验收标准

1. WHEN 用户点击导航栏的 Dashboard 按钮 THEN 系统 SHALL 显示下拉菜单包含管理中心、推广中心、测试中心三个入口
2. WHEN 管理员访问管理中心 THEN 系统 SHALL 显示数据表管理和推广者管理等功能入口
3. WHEN 非管理员用户尝试访问管理中心或测试中心 THEN 系统 SHALL 拒绝访问并提示无权限
4. WHEN 推广者访问推广中心 THEN 系统 SHALL 允许访问并显示推广者面板
